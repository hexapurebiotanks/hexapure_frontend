const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/config-olvm9fE5.js","assets/index.esm-DkvNeMuJ.js","assets/index.esm-D0dmCHGp.js","assets/index.esm-BV1k-qkD.js"])))=>i.map(i=>d[i]);
import{j as e,c as W,a as $,u as K,r as a,b as G,_ as J}from"./index-W4UHybia.js";import{getDoc as Q,doc as X}from"./index.esm-BV1k-qkD.js";import{c as h}from"./createSvgIcon-BGFq9mHI.js";import{E as Y}from"./Email-Ch56pKUK.js";import{V as M}from"./Visibility-BJQ6O0a3.js";import"./index.esm-DkvNeMuJ.js";const V=h(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"})),Z=h(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),ee=h(e.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),se=h(e.jsx("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"})),I=h(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),ne=()=>{const L=W(),c=$(),{signup:_,login:D,currentUser:y}=K(),q=L.pathname!=="/admin/create",[r,H]=a.useState(q),[A,w]=a.useState(""),[x,p]=a.useState(""),[n,g]=a.useState(""),[E,N]=a.useState(""),[b,S]=a.useState(!1),[C,u]=a.useState(""),[F,f]=a.useState(""),[l,k]=a.useState(!1),P=()=>{k(s=>!s)};a.useEffect(()=>{(async()=>{if(y)try{const{initFirebase:v}=await J(async()=>{const{initFirebase:o}=await import("./config-olvm9fE5.js");return{initFirebase:o}},__vite__mapDeps([0,1,2,3])),{db:j}=v(),i=await Q(X(j,"users",y.uid));if(i.exists()){const R=i.data().role;R==="admin"?c("/admin/dashboard",{replace:!0}):R==="user"&&c("/user/dashboard",{replace:!0})}}catch(v){console.error("Error checking user role:",v),c("/user/dashboard",{replace:!0})}})()},[y,c]);const T=async s=>{if(s.preventDefault(),u(""),f(""),S(!0),!(()=>{if(!r){if(n!==E)return u("Passwords do not match."),!1;if(n.length<6)return u("Password must be at least 6 characters."),!1}return!0})()){S(!1);return}try{r?(await D(x,n),f("Login Successful! Redirecting to Dashboard...")):(await _(x,n,A),f("Account created successfully! Redirecting to login..."),w(""),p(""),g(""),N(""),k(!1),c("/admin/login"))}catch(j){const i=j.code;let o="An unexpected error occurred. Please try again.";i==="auth/user-not-found"||i==="auth/wrong-password"||i==="auth/invalid-credential"?o="Invalid email or password.":i==="auth/email-already-in-use"?o="Registration Failed: This email is already in use.":i==="auth/weak-password"?o="Password is too weak. Must be at least 6 characters.":o=j.message,u(o)}finally{S(!1)}},O=()=>{const s=!r;H(s),c(s?"/admin/login":"/admin/create"),w(""),p(""),g(""),N(""),u(""),f(""),k(!1)},U=r?"Sign In":"Create Account",B=r?"Sign In":"Register",d="w-full pl-10 pr-10 py-3 border border-gray-200 bg-background rounded-md focus:ring-1 focus:ring-primary focus:border-primary transition duration-150 text-charcoal shadow-sm text-sm placeholder-text-light",m="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",t="w-5 h-5 text-text-dark/40",z="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer";return e.jsx("div",{className:"h-screen flex items-center justify-center  p-4 sm:p-6",children:e.jsxs("div",{className:"w-full max-w-md sm:max-w-s  p-6 sm:p-8 rounded-lg shadow-2xl bg-white/95 backdrop-blur-sm border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"/.netlify/images?url=/images/hexapure_logo.png&w=200&fm=webp",alt:"App Logo",className:"h-10 w-auto mx-auto mb-3",loading:"eager",width:"200",height:"50",onError:s=>{s.target.onerror=null,s.target.src="https://placehold.co/100x40/FFFFFF/333333?text=APP"}}),e.jsx("h2",{className:"text-xl font-bold text-text-dark tracking-tight",children:U})]}),e.jsxs("form",{onSubmit:T,children:[(C||F)&&e.jsx("div",{className:`p-3 mb-4 rounded-md text-sm transition-all duration-300 ${C?"bg-red-50 border border-red-400 text-red-700":"bg-green-50 border border-green-400 text-green-700"}`,children:C||F}),r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(Z,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:"email",placeholder:"Email address",className:d,value:x,onChange:s=>p(s.target.value),required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(V,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:l?"text":"password",placeholder:"Password",className:d,value:n,onChange:s=>g(s.target.value),required:!0}),e.jsx("div",{className:z,onClick:P,children:l?e.jsx(I,{className:t,style:{fontSize:20}}):e.jsx(M,{className:t,style:{fontSize:20}})})]}),e.jsx("div",{className:"flex justify-end text-xs pt-1",children:e.jsx(G,{to:"/forgot-password",className:"font-medium text-text-dark hover:text-primary transition duration-200",children:"Forgot Password?"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(se,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:"text",placeholder:"Full Name",className:d,value:A,onChange:s=>w(s.target.value),required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(Y,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:"email",placeholder:"Email address",className:d,value:x,onChange:s=>p(s.target.value),required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(V,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:l?"text":"password",placeholder:"Password (min 6 chars)",className:d,value:n,onChange:s=>g(s.target.value),required:!0}),e.jsx("div",{className:z,onClick:P,children:l?e.jsx(I,{className:t,style:{fontSize:20}}):e.jsx(M,{className:t,style:{fontSize:20}})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:m,children:e.jsx(ee,{className:t,style:{fontSize:20}})}),e.jsx("input",{type:l?"text":"password",placeholder:"Confirm Password",className:d,value:E,onChange:s=>N(s.target.value),required:!0}),e.jsx("div",{className:z,onClick:P,children:l?e.jsx(I,{className:t,style:{fontSize:20}}):e.jsx(M,{className:t,style:{fontSize:20}})})]})]}),e.jsx("button",{type:"submit",className:`w-full py-2 px-2 rounded-md font-bold text-white transition duration-300 shadow-md mt-6 ${b?"bg-primary-dark opacity-75 cursor-not-allowed":"bg-primary hover:bg-primary-dark active:scale-[0.99] shadow-primary/40"}`,disabled:b,children:b?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:r?"Signing In...":"Registering..."})]}):B})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-text-dark",children:[r?"Don't have an account?":"Already have an account?",e.jsx("button",{type:"button",onClick:O,className:"ml-1 font-semibold text-accent hover:text-primary-dark transition duration-200",children:r?"Create Account":"Sign In"})]})})]})})};export{ne as default};
