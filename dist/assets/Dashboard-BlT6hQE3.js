const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/config-olvm9fE5.js","assets/index.esm-DkvNeMuJ.js","assets/index.esm-D0dmCHGp.js","assets/index.esm-BV1k-qkD.js"])))=>i.map(i=>d[i]);
import{j as e,r as l,R as _,_ as $,u as ee,a as te}from"./index-W4UHybia.js";import{updateDoc as P,doc as A,deleteDoc as V}from"./index.esm-BV1k-qkD.js";import{C as se}from"./Close-L9B8Ztgl.js";import{c as S}from"./createSvgIcon-BGFq9mHI.js";import{s as ae,b as re,c as le}from"./firestoreService-8e-imIJw.js";import{E as ne}from"./Email-Ch56pKUK.js";import{C as ie}from"./CheckCircle-BCRwQAEx.js";import"./index.esm-DkvNeMuJ.js";const q=S(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),oe=S(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),ce=S(e.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),de=S(e.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),me=S(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),xe=S(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),I=S(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),R=({title:g,value:x,subText:c,icon:u,colorClass:p})=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md flex justify-between items-start hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium mb-1 text-sm",children:g}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-0.5",children:x}),e.jsx("p",{className:`text-sm ${p} font-medium`,children:c})]}),e.jsx("div",{className:`p-3 rounded-xl ${p.replace("text-","bg-")} bg-opacity-10`,children:u})]}),ue=({activeTab:g,contacts:x,users:c,searchQuery:u})=>{const[p,y]=l.useState(x),[o,b]=l.useState(c),[N,j]=l.useState(!1),[D,w]=l.useState(!1),[r,C]=l.useState(null),[n,k]=l.useState(null),[E,f]=l.useState(null),[d,L]=l.useState({name:"",email:"",role:"user",status:"active"}),[h,z]=l.useState({fromDate:"",toDate:""}),B=t=>{if(t.length===0){alert("No data to export");return}const a=[["Name","Email","Company","Phone","Subject","Message","Status","Date"].join(","),...t.map(v=>[`"${v.name||""}"`,`"${v.email||""}"`,`"${v.company||""}"`,`"${v.phone||""}"`,`"${v.subject||""}"`,`"${v.message||""}"`,`"${v.status||""}"`,`"${v.date||""}"`].join(","))].join(`
`),m=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),M=URL.createObjectURL(m);i.setAttribute("href",M),i.setAttribute("download",`enquiries_export_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)};_.useEffect(()=>{y(x)},[x]),_.useEffect(()=>{b(c)},[c]);const H=async(t,s)=>{try{y(i=>i.map(M=>M.id===t?{...M,status:s}:M));const{initFirebase:a}=await $(async()=>{const{initFirebase:i}=await import("./config-olvm9fE5.js");return{initFirebase:i}},__vite__mapDeps([0,1,2,3])),{db:m}=a();await P(A(m,"contacts",t),{status:s,updatedAt:new Date})}catch(a){console.error("Error updating status:",a),y(x)}},U=t=>t.role!=="admin"?!0:o.filter(a=>a.role==="admin").length>1,G=t=>{C(t),L({name:t.name,email:t.email,role:t.role,status:t.status}),j(!0),f(null)},W=t=>{k({type:"user",item:t}),w(!0),f(null)},J=t=>{k({type:"contact",item:t}),w(!0)},K=async()=>{w(!1);const t=n;k(null);try{const{initFirebase:s}=await $(async()=>{const{initFirebase:m}=await import("./config-olvm9fE5.js");return{initFirebase:m}},__vite__mapDeps([0,1,2,3])),{db:a}=s();t.type==="user"?(b(m=>m.filter(i=>i.id!==t.item.id)),await V(A(a,"users",t.item.id))):t.type==="contact"&&(y(m=>m.filter(i=>i.id!==t.item.id)),await V(A(a,"contacts",t.item.id)))}catch(s){console.error("Error deleting item:",s),t.type==="user"?b(a=>[...a,t.item]):t.type==="contact"&&y(a=>[...a,t.item])}},X=async t=>{t.preventDefault();try{const{initFirebase:s}=await $(async()=>{const{initFirebase:m}=await import("./config-olvm9fE5.js");return{initFirebase:m}},__vite__mapDeps([0,1,2,3])),{db:a}=s();await P(A(a,"users",r.id),{name:d.name,email:d.email,role:d.role,status:d.status,updatedAt:new Date}),b(m=>m.map(i=>i.id===r.id?{...i,...d}:i)),j(!1),C(null)}catch(s){console.error("Error updating user:",s)}},Y=t=>{f(E===t?null:t)};_.useEffect(()=>{const t=s=>{E&&!s.target.closest(".dropdown-container")&&f(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[E]);const F=t=>{const s={new:{color:"bg-blue-100 text-blue-800",label:"New"},contacted:{color:"bg-yellow-100 text-yellow-800",label:"Contacted"},pending:{color:"bg-orange-100 text-orange-800",label:"Pending"},resolved:{color:"bg-green-100 text-green-800",label:"Resolved"},active:{color:"bg-green-100 text-green-800",label:"Active"},inactive:{color:"bg-red-100 text-red-800",label:"Inactive"}},a=s[t]||s.new;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.label})},Z=t=>{const s={admin:{color:"bg-purple-100 text-purple-800",label:"Admin"},user:{color:"bg-gray-100 text-gray-800",label:"User"},moderator:{color:"bg-blue-100 text-blue-800",label:"Moderator"}},a=s[t]||s.user;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.label})},T=p.filter(t=>{if(u){const s=u.toLowerCase();if(!(t.name?.toLowerCase().includes(s)||t.email?.toLowerCase().includes(s)||t.company?.toLowerCase().includes(s)||t.status?.toLowerCase().includes(s)))return!1}if(h.fromDate||h.toDate){const s=new Date(t.createdAt?.toDate?.()||t.createdAt);if(isNaN(s.getTime()))return!0;if(h.fromDate){const a=new Date(h.fromDate);if(s<a)return!1}if(h.toDate){const a=new Date(h.toDate);if(a.setHours(23,59,59,999),s>a)return!1}}return!0}),O=o.filter(t=>{if(!u)return!0;const s=u.toLowerCase();return t.name?.toLowerCase().includes(s)||t.email?.toLowerCase().includes(s)||t.role?.toLowerCase().includes(s)}),Q=()=>g==="registrations"?e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:["New Enquires (",T.length,u||h.fromDate||h.toDate?` of ${p.length}`:"",")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),e.jsx("input",{type:"date",value:h.fromDate,onChange:t=>z({...h,fromDate:t.target.value}),className:"border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),e.jsx("input",{type:"date",value:h.toDate,onChange:t=>z({...h,toDate:t.target.value}),className:"border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>B(T),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Company"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.company}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.subject}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F(t.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("select",{value:t.status,onChange:s=>H(t.id,s.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 mr-2",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"resolved",children:"Resolved"})]}),e.jsx("button",{onClick:()=>J(t),className:"text-red-600 hover:text-red-800 p-1 rounded",title:"Delete enquiry",children:e.jsx(q,{className:"w-4 h-4"})})]})]},t.id))})]}),p.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No contact Enquires found"})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 p-6 border-b",children:["User Management (",O.length,u?` of ${o.length}`:"",")"]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-100",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Registration Date"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:O.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Z(t.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F(t.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.createdAt?.split("T")[0]||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:t.lastLogin||"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 relative",children:e.jsxs("div",{className:"relative dropdown-container",children:[e.jsx("button",{onClick:()=>Y(t.id),className:"p-1 rounded hover:bg-gray-200",title:"More actions",children:e.jsx(de,{className:"w-4 h-4"})}),E===t.id&&e.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white border border-gray-200 rounded-md shadow-lg z-10 dropdown-container",children:[e.jsxs("button",{onClick:()=>G(t),className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>W(t),disabled:!U(t),className:`flex items-center w-full px-3 py-2 text-sm hover:bg-gray-100 ${U(t)?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"}`,children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},t.id))})]}),o.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found"})]})]});return e.jsxs(e.Fragment,{children:[Q(),N&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit User"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>L({...d,name:t.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:t=>L({...d,email:t.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{value:d.role,onChange:t=>L({...d,role:t.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"moderator",children:"Moderator"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:t=>L({...d,status:t.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Changes"})]})]})]})}),D&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Confirmation"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete this ",n.type,"?"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"bg-gray-50 rounded p-3",children:n.type==="user"?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.item.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n.item.email}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Role: ",n.item.role]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.item.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n.item.email}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Subject: ",n.item.subject]})]})}),n.type==="user"&&!U(n.item)&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ Cannot delete the last admin user. At least one admin must remain."})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:n.type==="user"&&!U(n.item),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})]})})]})},he=({searchQuery:g,onSearchChange:x})=>{const{currentUser:c,logout:u}=ee(),p=te(),[y,o]=l.useState(!1),b=l.useRef(null),N=l.useRef(null),j=c?.displayName?c.displayName.split(" ").map(r=>r[0]).join("").toUpperCase():"AD",D=()=>{o(r=>!r)},w=async()=>{try{await u(),o(!1),p("/admin/login")}catch(r){console.error("Failed to log out:",r)}};return l.useEffect(()=>{const r=C=>{b.current&&!b.current.contains(C.target)&&N.current&&!N.current.contains(C.target)&&o(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 flex justify-between items-center h-16 px-4 sm:px-6 bg-white shadow-sm border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/.netlify/images?url=/images/hexapure_logo.png&w=200&fm=webp",alt:"Company Logo",className:"h-8 w-auto",loading:"eager",width:"200",height:"40",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="block"}}),e.jsx("div",{className:"hidden bg-indigo-600 text-white font-bold text-lg px-3 py-1 rounded",children:"LOGO"})]}),e.jsxs("div",{className:"hidden md:block relative w-72 mx-4",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search",value:g,onChange:r=>x(r.target.value),className:"w-full py-2 pl-10 pr-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsx("div",{className:"flex items-center space-x-3 sm:space-x-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:N,onClick:D,className:"flex items-center space-x-1 sm:space-x-2 cursor-pointer focus:outline-none",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center text-white font-semibold text-xs sm:text-sm",children:j}),e.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700",children:c?.displayName||"Admin User"})]}),y&&e.jsxs("div",{ref:b,className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 z-50",children:[e.jsx("div",{className:"px-4 py-2 text-sm text-gray-700 border-b border-gray-100 truncate",children:c?.email||"admin@example.com"}),e.jsxs("button",{onClick:w,className:"w-full text-left flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition duration-150",children:[e.jsx(ce,{className:"mr-3 h-4 w-4"}),"Sign Out"]})]})]})})]}),e.jsx("div",{className:"fixed top-16 left-0 right-0 z-40 md:hidden bg-white border-b px-4 py-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:g,onChange:r=>x(r.target.value),className:"w-full py-2 pl-10 pr-4 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})})]})},Ne=()=>{const[g,x]=l.useState("registrations"),[c,u]=l.useState([]),[p,y]=l.useState([]),[o,b]=l.useState({totalUsers:0,newRegistrations:0,contacted:0,pending:0}),[N,j]=l.useState(!0),[D,w]=l.useState("");return l.useEffect(()=>{const C=(async()=>{const n=await ae(f=>{u(f),j(!1)}),k=await re(f=>{y(f)}),E=await le(f=>{b(f)});return()=>{n(),k(),E()}})();return()=>{C.then(n=>n&&n())}},[]),N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2E8B57] mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(he,{searchQuery:D,onSearchChange:w}),e.jsxs("main",{className:"pt-16 p-4 sm:p-6 mt-9 md:p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8 mt-12 md:mt-6 lg:mt-6",children:[e.jsx(R,{title:"Total Enquires",value:o.totalUsers.toString(),subText:"From contact forms",icon:e.jsx(xe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"}),colorClass:"text-purple-600"}),e.jsx(R,{title:"New Enquires",value:o.newRegistrations.toString(),subText:"Require attention",icon:e.jsx(ne,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),colorClass:"text-green-600"}),e.jsx(R,{title:"Contacted Enquires",value:o.contacted.toString(),subText:`${o.totalUsers?Math.round(o.contacted/o.totalUsers*100):0}% of total`,icon:e.jsx(ie,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),colorClass:"text-blue-600"}),e.jsx(R,{title:"Pending Enquires",value:o.pending.toString(),subText:"Need follow-up",icon:e.jsx(me,{className:"w-5 h-5 sm:w-6 sm:h-6 text-pink-600"}),colorClass:"text-pink-600"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>x("registrations"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${g==="registrations"?"border-[#2E8B57] text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Enquires (",c.length,")"]}),e.jsxs("button",{onClick:()=>x("users"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${g==="users"?"border-[#2E8B57] text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["User Management (",p.length,")"]})]})})}),e.jsx(ue,{activeTab:g,contacts:c,users:p,searchQuery:D})]})]})};export{Ne as default};
